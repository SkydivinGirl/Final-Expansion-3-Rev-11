/* Copyright Information
	 * @author	Tim Düsterhus
	 * @copyright	2012-2015 Tim Düsterhus
	 * @license	BSD 3-Clause License <http://opensource.org/licenses/BSD-3-Clause>
	 * @package	be.bastelstu.wcf.push
 */
(function(){!function(n,e){"use strict";var t,i,o,s,a,c,r,u,l,f;return o={log:function(n){},warn:function(n){},error:function(n){}},c=!1,f=null,i=!1,s={message:{}},a=function(n){var e,t,o,a,r;if(!c){for(c=!0,f=n,f.onConnect(function(){return i=!0}),f.onDisconnect(function(){return i=!1}),a=[15,30,60,90,120],r=[],e=0,o=a.length;o>e;e++)t=a[e],r.push(function(n){return setInterval(function(){var e;if(i&&(e="be.bastelstu.wcf.push.tick"+n,null!=s.message[e]))return s.message[e].fire()},1e3*n)}(t));return r}},r=function(e){return n.isFunction(e)?c?f.onConnect(e):(o.warn("Someone tried to bind an onConnect callback before initialization of a service"),!1):!1},u=function(e){return n.isFunction(e)?c?f.onDisconnect(e):(o.warn("Someone tried to bind an onDisonnect callback before initialization of a service"),!1):!1},l=function(e,t){var i;return n.isFunction(t)&&/^[a-zA-Z0-9-_]+\.[a-zA-Z0-9-_]+(\.[a-zA-Z0-9-_]+)+$/.test(e)?c?/be\.bastelstu\.wcf\.push.tick(15|(3|6|9|12)0)/.test(e)?(null==(i=s.message)[e]&&(i[e]=n.Callbacks()),s.message[e].add(t),!0):f.onMessage(e,t):(o.warn("Someone tried to bind an onMessage("+e+") callback before initialization of a service"),!1):!1},null==e.be&&(e.be={}),null==be.bastelstu&&(be.bastelstu={}),null==(t=be.bastelstu).wcf&&(t.wcf={}),be.bastelstu.wcf.push={init:a,onConnect:r,onDisconnect:u,onMessage:l}}(jQuery,this)}).call(this);